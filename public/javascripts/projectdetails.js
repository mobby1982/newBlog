

$( document ).ready(function(){
  if((window.location.href.indexOf("projectdetails")) > -1) {

    $.ajax({
      url: '/svirdi/projecttimeseries',
      data: {
        format: 'json'
      },
      success: function(data) {
        console.log("Data "+JSON.stringify(data));
        var chart;
            nv.addGraph(function() {
              chart = nv.models.multiBarChart()
                .barColor(d3.scale.category20().range())
                .duration(300)
                .margin({bottom: 100, left: 70})
                .rotateLabels(45)
                .groupSpacing(0.1)
                ;
              chart.reduceXTicks(false).staggerLabels(true);
              chart.xAxis
                .axisLabel("Day of Month")
                .axisLabelDistance(35)
                .showMaxMin(false)
                .tickFormat(d3.format(',.6f'))
                ;
              chart.yAxis
                .axisLabel("Event Types")
                .axisLabelDistance(-5)
                .tickFormat(d3.format(',.01f'))
                ;
              chart.dispatch.on('renderEnd', function(){
                nv.log('Render Complete');
              });
              d3.select('#chart1 svg')
                .datum(data)
                .call(chart);
              nv.utils.windowResize(chart.update);
              chart.dispatch.on('stateChange', function(e) {
                nv.log('New State:', JSON.stringify(e));
              });
              chart.state.dispatch.on('change', function(state){
                nv.log('state', JSON.stringify(state));
              });
              return chart;
            });


      },
      type: 'GET'

    });
    var exData = function exampleData() {
      return [{
        "key": "Stream #0",
        "values": [{
          "day": 0,
          "y": 0.11303387169259019
        }, {
          "x": 1,
          "y": 0.15887602220086086
        }, {
          "x": 2,
          "y": 0.1312273793360728
        }, {
          "x": 3,
          "y": 0.19541480954665602
        }, {
          "x": 4,
          "y": 0.10456610770988459
        }, {
          "x": 5,
          "y": 0.15465741859548163
        }, {
          "x": 6,
          "y": 0.11855619617213664
        }, {
          "x": 7,
          "y": 0.1393477037747764
        }, {
          "x": 8,
          "y": 0.1780489736600532
        }, {
          "x": 9,
          "y": 0.16023918017866529
        }, {
          "x": 10,
          "y": 1.2073961627772365
        }, {
          "x": 11,
          "y": 0.7259486232432691
        }, {
          "x": 12,
          "y": 0.12515568762260557
        }, {
          "x": 13,
          "y": 0.12551228567325864
        }, {
          "x": 14,
          "y": 0.1297548173636328
        }, {
          "x": 15,
          "y": 0.1632715711408355
        }, {
          "x": 16,
          "y": 0.19452856063865662
        }, {
          "x": 17,
          "y": 0.12377544479264967
        }, {
          "x": 18,
          "y": 0.15191500208254202
        }, {
          "x": 19,
          "y": 0.1620769456603781
        }, {
          "x": 20,
          "y": 0.46256839108363623
        }, {
          "x": 21,
          "y": 1.6766894849434264
        }, {
          "x": 22,
          "y": 4.083074681908663
        }, {
          "x": 23,
          "y": 6.181540114830805
        }]
      }, {
        "key": "Stream #1",
        "values": [{
          "x": 0,
          "y": 0.16767740885255356
        }, {
          "x": 1,
          "y": 0.1617896793037736
        }, {
          "x": 2,
          "y": 0.1831155957581298
        }, {
          "x": 3,
          "y": 0.14006999750587612
        }, {
          "x": 4,
          "y": 0.13157881022061643
        }, {
          "x": 5,
          "y": 0.11062304708916455
        }, {
          "x": 6,
          "y": 0.1629951719337085
        }, {
          "x": 7,
          "y": 0.34123499750319136
        }, {
          "x": 8,
          "y": 0.7118194304717589
        }, {
          "x": 9,
          "y": 1.313341445870655
        }, {
          "x": 10,
          "y": 2.0197749840241386
        }, {
          "x": 11,
          "y": 2.2837342204640145
        }, {
          "x": 12,
          "y": 1.9944657293586057
        }, {
          "x": 13,
          "y": 1.2545684244678428
        }, {
          "x": 14,
          "y": 0.7495437079310173
        }, {
          "x": 15,
          "y": 0.8280055503585461
        }, {
          "x": 16,
          "y": 1.474738215514897
        }, {
          "x": 17,
          "y": 2.5121220080808144
        }, {
          "x": 18,
          "y": 3.250940400243094
        }, {
          "x": 19,
          "y": 3.217709999453096
        }, {
          "x": 20,
          "y": 2.649371026750555
        }, {
          "x": 21,
          "y": 1.7468737102444378
        }, {
          "x": 22,
          "y": 0.8775513540922147
        }, {
          "x": 23,
          "y": 0.38275089056508677
        }]
      }, {
        "key": "Stream #2",
        "values": [{
          "x": 0,
          "y": 0.1483584831984119
        }, {
          "x": 1,
          "y": 0.2040297092283007
        }, {
          "x": 2,
          "y": 0.4569852718079303
        }, {
          "x": 3,
          "y": 0.9026848673212494
        }, {
          "x": 4,
          "y": 1.1726703251406614
        }, {
          "x": 5,
          "y": 0.8213371630087658
        }, {
          "x": 6,
          "y": 0.35711543200740126
        }, {
          "x": 7,
          "y": 0.18434294891240918
        }, {
          "x": 8,
          "y": 0.10634013001285764
        }, {
          "x": 9,
          "y": 0.13547282642830263
        }, {
          "x": 10,
          "y": 0.11541499080324215
        }, {
          "x": 11,
          "y": 0.1629846580932902
        }, {
          "x": 12,
          "y": 0.18473655074963122
        }, {
          "x": 13,
          "y": 0.1277423050758336
        }, {
          "x": 14,
          "y": 0.11505288828988994
        }, {
          "x": 15,
          "y": 0.1771052225021981
        }, {
          "x": 16,
          "y": 0.16725110536453708
        }, {
          "x": 17,
          "y": 0.11113551234202303
        }, {
          "x": 18,
          "y": 0.18125554483827278
        }, {
          "x": 19,
          "y": 0.1320943410614575
        }, {
          "x": 20,
          "y": 0.11599206691637179
        }, {
          "x": 21,
          "y": 0.5336101103840241
        }, {
          "x": 22,
          "y": 1.5181862419683192
        }, {
          "x": 23,
          "y": 0.4945862636162961
        }]
      }];
    }
    //console.log("data"+JSON.stringify(exData()));


  }
});

//Generate some nice data.
